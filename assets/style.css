/* assets/style.css */
html, body { 
    height: 100%;
    margin: 0;
    font-family: 'Inter', sans-serif; 
    background: #000000; 
    transition: background-color 0.5s; 
    overflow: hidden; /* Prevent scrollbars on the body */
}

/* Main application layout */
body {
    display: flex;
    flex-direction: column;
}

nav { 
    transform: translateY(-100%);
    transition: transform 0.3s ease-in-out;
    height: 72px; /* Set a fixed height for nav */
    flex-shrink: 0; /* Prevent nav from shrinking */
}
nav.visible {
    transform: translateY(0);
}

/* Main content wrapper */
.main-content-wrapper {
    flex-grow: 1; /* Take up remaining vertical space */
    overflow-y: auto; /* Allow scrolling ONLY within this area */
    height: calc(100vh - 72px);
    position: relative; /* Needed for child absolute positioning */
}

.nav-btn { background-color: #1f2937; color: #d1d5db; transition: all 0.2s ease-in-out; }
.nav-btn.active { background-color: #facc15; color: #111827; font-weight: bold; }

.view { 
    display: none; 
    height: 100%; 
}
.view.active { 
    display: flex; /* Default display for active views */
    flex-direction: column;
    animation: fadeIn 0.5s; 
}
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* =================================== */
/* == NEW DASHBOARD LAYOUT (FIXED) == */
/* =================================== */

#view-dashboard {
    position: relative; /* Establishes a positioning context */
    overflow: hidden; /* Prevents children from spilling out */
    padding: var(--padding-top, 16px) var(--padding-right, 16px) var(--padding-bottom, 16px) var(--padding-left, 16px);
    box-sizing: border-box;
}

/* 1. Background Layer Container - THIS IS THE KEY FIX */
.dashboard-background-container {
    position: absolute;
    top: var(--padding-top, 16px);
    right: var(--padding-right, 16px);
    bottom: var(--padding-bottom, 16px);
    left: var(--padding-left, 16px);
    z-index: 0;
    border-radius: 0.75rem; /* rounded-lg */
    overflow: hidden; /* Ensures overlay and image respect the border radius */
}

/* 2. The actual background image and its overlay */
.dashboard-background-layer {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-size: cover;
    background-position: center;
}
.dashboard-overlay {
    background-color: rgba(0,0,0,0.5);
}

/* 3. The main content area */
.dashboard-content {
    position: relative;
    z-index: 2; /* Sits on top of the background */
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
}

#dashboard-ui-elements {
    flex-shrink: 0; 
}

/* Header responsiveness */
#dashboard-header {
    background-size: cover;
    background-position: center;
    padding: 1rem; /* p-4 */
    margin-bottom: 1rem; /* mb-4 */
}
#dashboard-header .header-content {
    display: flex;
    align-items: center;
    height: 5rem; /* 80px */
    transition: height 0.3s ease;
}
#dashboard-header #dashboard-logo {
    height: 100%;
    width: auto;
    object-fit: contain;
}
#dashboard-header #header-caption {
    font-size: 1.5rem; /* 24px */
    transition: font-size 0.3s ease;
}
#dashboard-header #header-subcaption {
    font-size: 1.125rem; /* 18px */
    transition: font-size 0.3s ease;
}

@media (max-width: 768px) {
    #dashboard-header .header-content {
        height: 4rem; /* 64px */
    }
    #dashboard-header #header-caption {
        font-size: 1.25rem; /* 20px */
    }
    #dashboard-header #header-subcaption {
        font-size: 1rem; /* 16px */
    }
}


.dashboard-content > main {
    flex-grow: 1; 
    display: flex;
    flex-direction: column;
    min-height: 0;
}
#dashboard-graph-content {
    flex-grow: 1; 
    position: relative; 
}
canvas#dashboardBarChart {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
#dashboard-values-container {
    flex-shrink: 0;
}

/* Other styles remain mostly the same... */
.status-light{width:16px;height:16px;border-radius:50%;background-color:#4b5563;transition:background-color .3s;box-shadow:inset 0 0 5px rgba(0,0,0,.4)}.status-light.active{background-color:#4ade80;box-shadow:0 0 10px #4ade80,inset 0 0 5px rgba(255,255,255,.4)}#brush-chart-container{position:relative;height:100px;cursor:default}#brush{position:absolute;top:0;height:100%;background-color:rgba(100,150,255,.3);border-left:2px solid #6495ED;border-right:2px solid #6495ED;cursor:move;z-index:10}.brush-handle{position:absolute;top:50%;transform:translateY(-50%);width:10px;height:40px;background-color:#6495ED;border:1px solid #fff;border-radius:3px}.brush-handle.left{left:-5px;cursor:ew-resize}.brush-handle.right{right:-5px;cursor:ew-resize}.settings-input:focus{outline:none!important;border-color:#4f46e5!important;box-shadow:0 0 0 1px #4f46e5!important}.tooltip-trigger{position:relative;display:inline-block;margin-left:8px}.tooltip-trigger .tooltip-content{visibility:hidden;width:320px;background-color:#334155;color:#fff;text-align:left;border-radius:6px;padding:10px;position:absolute;z-index:50;bottom:130%;left:50%;margin-left:-160px;opacity:0;transition:opacity .3s;font-size:.8rem;line-height:1.4;box-shadow:0 2px 10px rgba(0,0,0,.5);pointer-events:none}.tooltip-trigger .tooltip-content::after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:#334155 transparent transparent transparent}.tooltip-trigger:hover .tooltip-content{visibility:visible;opacity:1}.settings-footer{position:sticky;bottom:-32px;margin-left:-32px;margin-right:-32px;padding:24px 32px 32px;background-color:rgba(249,250,251,.8);border-top:1px solid #e5e7eb;backdrop-filter:blur(8px);border-bottom-left-radius:.75rem;border-bottom-right-radius:.75rem}.drag-handle{cursor:grab;position:absolute;left:8px;top:50%;transform:translateY(-50%);color:#9ca3af;padding:1rem}.drag-handle:hover{color:#4b5563}.parameter-row,.rotation-row{padding-left:48px!important}.parameter-row.dragging,.rotation-row.dragging{opacity:.5;background:#e0e7ff}#pin-input{letter-spacing:16px;text-align:center;caret-color:#4f46e5;-webkit-text-security:disc;-moz-text-security:disc;text-security:disc;padding-left:20px}.keypad-btn:active{background-color:#9ca3af}.image-picker-tabs button{padding:8px 12px;border-bottom:2px solid transparent;color:#6b7280}.image-picker-tabs button.active{color:#4f46e5;border-bottom-color:#4f46e5;font-weight:600}.image-picker-content{display:none}.image-picker-content.active{display:block}.dashboard-main-content{display:none}.dashboard-main-content.active{display:block;height:100%;animation:fadeIn .5s}#dashboard-video,#dashboard-image,#dashboard-youtube-iframe{width:100%;height:100%;object-fit:contain}.ad-mode #dashboard-ui-elements{display:none}.ad-mode .dashboard-main-content.active{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:100;background:#000}